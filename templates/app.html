<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Restaurant Finder</title>
	<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.js'></script>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">
	<link rel="stylesheet" media="screen" href="/{{ url_for('static', filename='bootstrap.min.css') }}">
  </head>
  <body>
	{% block content %}
	<p> This will be the application </p>
	<!-- Begin selection options -->
	<div class="container">
	  	<div class="row">

			<!-- Begin money button group -->
			<div class="btn-group col-xs-12 toggle" data-toggle="buttons">
				<label class="btn btn-default active">
					<input type="checkbox" name="price" id="ds1" value="$">$
				</label>
				<label class="btn btn-default active">
					<input type="checkbox" name="price" id="ds2" value="$$">$$
				</label>
				<label class="btn btn-default active">
					<input type="checkbox" name="price" id="ds3" value="$$$">$$$
				</label>
				<label class="btn btn-default active">
					<input type="checkbox" name="price" id="ds4" value="$$$$">$$$$
				</label>
			</div>  <!-- end money button group -->
		  
		
		</div>  <!-- end top row -->
	</div>  <!-- End selection options -->


	  <div class="row">
	  <div class="col">
	    <!-- Create table -->
	    <p>(This will be the list of restaurants)</p>
	  </div>  <!-- end of list column -->
	
	
	  <div class="col">
		  <div id='map' style='width: 400px; height: 300px;'></div>
		  <script>
		  mapboxgl.accessToken = 'pk.eyJ1IjoianNvbWEiLCJhIjoibFJmYl9JWSJ9.AUm8d76cbOvVEn2mMeG_ZA';
		  var map = new mapboxgl.Map({
			container: 'map',
			style: 'mapbox://styles/mapbox/streets-v9',
			center: [{{ center_long }}, {{ center_lat }}],
			zoom: {{ zoom }}
		  });
		  var features = []
			  {% for result in results %}
				features.push({
					"type": "Feature",
					"geometry": {
						"type": "Point",
						"coordinates": [
							 {{ result.coordinates.longitude }},
							 {{ result.coordinates.latitude }}
						]
					}
				})
			  {% endfor %}
		  map.on('load', function() {
			var geojsonData = {
			  "type": "FeatureCollection",
			  "features": features
			};
			map.addLayer({
			  "id": "points",
			  "type": "circle",
			  "source": {
				"type": "geojson",
				"data": geojsonData
			  }
			})
		  })
		  </script>
	    </div>  <!-- end of map column -->
	  </div>  <!-- end of list/map row -->
	</div>  <!-- end of container -->
	  <div class="row">
	    <p><strong>Results found:</strong> {{ results|length }}</p>
	    <p><strong>center_long:</strong> {{ center_long }}</p>
	    <p><strong>results[0].coordinates.longitude:</strong> {{ results[0].coordinates.longitude }}</p>
	    <p><strong>First result:</strong> {{ results[0].name }}</p>
	    <p><strong>Last result: </strong> {{ results[1].name }}</p>
	    <p></p>
	    <p></p>
	  </div>
	
	</div>
	{% endblock %}
  </body>


<!-- //ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js 
<script type="text/javascript" src="/{{ url_for('static', filename='bootstrap.min.js') }}"></script>
-->

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
</html>